# ============================================================================
# LifeOS - Environment Variables Template
# ============================================================================
#
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git (it's in .gitignore)
#
# Generated: 2025-11-17
# Project: LifeOS (Life Operating System)
# ============================================================================

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
# Get these from: https://supabase.com/dashboard → Your Project → Settings → API

# Supabase Project URL (e.g., https://abcdefgh.supabase.co)
SUPABASE_URL=https://your-project-ref.supabase.co

# Supabase Anon Key (public, safe for client-side use)
SUPABASE_ANON_KEY=your-anon-key-here

# Supabase Service Role Key (SECRET - never expose to client)
# Used for: Edge Functions, server-side operations, bypassing RLS
SUPABASE_SERVICE_KEY=your-service-role-key-here

# ============================================================================
# FIREBASE CONFIGURATION (for FCM Push Notifications)
# ============================================================================
# Get these from: https://console.firebase.google.com/ → Project Settings

# Firebase Project ID
FIREBASE_PROJECT_ID=your-firebase-project-id

# Firebase Messaging Sender ID
FIREBASE_MESSAGING_SENDER_ID=your-sender-id

# Firebase API Key (Web)
FIREBASE_API_KEY=your-firebase-api-key

# Firebase App ID (Android)
FIREBASE_ANDROID_APP_ID=your-android-app-id

# Firebase App ID (iOS)
FIREBASE_IOS_APP_ID=your-ios-app-id

# ============================================================================
# AI PROVIDERS (Story 2.2, 2.4, 4.4, 4.10)
# ============================================================================

# OpenAI (GPT-4) - Premium Tier
OPENAI_API_KEY=your-openai-api-key
OPENAI_ORG_ID=your-openai-org-id

# Anthropic (Claude) - Standard Tier
ANTHROPIC_API_KEY=your-anthropic-api-key

# Llama 3 (Self-hosted or Replicate) - Free Tier
# Option 1: Replicate
REPLICATE_API_KEY=your-replicate-api-key

# Option 2: Self-hosted Llama endpoint
LLAMA_ENDPOINT_URL=http://your-llama-server:8000

# AI Configuration
AI_DAILY_LIMIT_FREE_TIER=5              # Max AI calls per day for free users
AI_DAILY_LIMIT_STANDARD_TIER=50         # Max AI calls per day for standard users
AI_DAILY_LIMIT_PREMIUM_TIER=unlimited   # Unlimited for premium users

# ============================================================================
# ENCRYPTION (Story 4.5 - E2EE Journaling)
# ============================================================================

# Master encryption key for E2EE (32-byte hex string)
# Generate with: openssl rand -hex 32
ENCRYPTION_MASTER_KEY=your-64-character-hex-string-here

# ============================================================================
# IN-APP PURCHASES (Story 7.6)
# ============================================================================

# RevenueCat (recommended for cross-platform IAP)
REVENUECAT_API_KEY=your-revenuecat-api-key
REVENUECAT_IOS_APP_ID=your-ios-app-specific-key
REVENUECAT_ANDROID_APP_ID=your-android-app-specific-key

# Alternative: Direct App Store / Play Store
IOS_SHARED_SECRET=your-ios-shared-secret
ANDROID_PLAY_SERVICE_ACCOUNT_JSON=path/to/service-account.json

# ============================================================================
# STORAGE (Supabase Storage)
# ============================================================================

# Storage buckets (auto-created in Supabase, no keys needed)
# - user-avatars (public)
# - body-measurement-photos (private, E2EE)
# - meditation-audio (public)

# Max file sizes (in bytes)
MAX_AVATAR_SIZE=5242880          # 5MB
MAX_PHOTO_SIZE=10485760          # 10MB
MAX_AUDIO_SIZE=52428800          # 50MB

# ============================================================================
# ENVIRONMENT
# ============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Debug mode
DEBUG=true

# Log level (verbose, debug, info, warn, error)
LOG_LEVEL=debug

# ============================================================================
# API RATE LIMITING (Story 8.4 - Max 1 insight notification/day)
# ============================================================================

# Daily limits
MAX_INSIGHTS_PER_DAY=1
MAX_NOTIFICATIONS_PER_DAY=10
MAX_AI_CONVERSATIONS_FREE=5      # Free tier
MAX_AI_CONVERSATIONS_PREMIUM=unlimited

# ============================================================================
# CRON JOBS (Edge Functions URLs)
# ============================================================================
# Replace with your actual Supabase Edge Function URLs

# Story 5.1: Daily Insight Detection (6am)
CRON_DETECT_PATTERNS_URL=https://your-project.supabase.co/functions/v1/detect-patterns

# Story 6.6: Weekly Summary Reports (Monday 6am)
CRON_WEEKLY_REPORTS_URL=https://your-project.supabase.co/functions/v1/generate-weekly-reports

# Story 8.5: Weekly Summary Notifications (Monday 8am)
CRON_WEEKLY_NOTIFICATIONS_URL=https://your-project.supabase.co/functions/v1/send-weekly-summary-notifications

# Story 6.1: Daily Streak Updates (Midnight)
CRON_UPDATE_STREAKS_URL=https://your-project.supabase.co/functions/v1/update-streaks

# ============================================================================
# EXTERNAL SERVICES (Optional)
# ============================================================================

# Sentry (Error Tracking)
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# Mixpanel / PostHog (Analytics)
MIXPANEL_TOKEN=your-mixpanel-token
POSTHOG_API_KEY=your-posthog-api-key
POSTHOG_HOST=https://app.posthog.com

# Email Service (for weekly reports, notifications)
# Option 1: Supabase built-in (no config needed)
# Option 2: SendGrid
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@lifeos.app

# ============================================================================
# SUBSCRIPTION PRICING (Story 7.6)
# ============================================================================

# Monthly subscription prices (in EUR cents)
PRICE_SINGLE_MODULE=299          # €2.99/month
PRICE_3_MODULE_PACK=500          # €5.00/month
PRICE_FULL_ACCESS=700            # €7.00/month

# Trial period (in days)
TRIAL_PERIOD_DAYS=14

# ============================================================================
# GDPR COMPLIANCE (Story 1.6, 9.5)
# ============================================================================

# Data export expiration (in days)
DATA_EXPORT_EXPIRY_DAYS=7

# Account deletion grace period (in days)
ACCOUNT_DELETION_GRACE_PERIOD_DAYS=7

# Data retention period (in days, after account deletion)
DATA_RETENTION_PERIOD_DAYS=30

# ============================================================================
# FEATURE FLAGS (Optional - for gradual rollout)
# ============================================================================

# Epic 5: Cross-Module Intelligence
FEATURE_CROSS_MODULE_INSIGHTS=true

# Epic 6: Gamification
FEATURE_STREAKS=true
FEATURE_BADGES=true

# Epic 7: Subscriptions
FEATURE_IN_APP_PURCHASES=true

# Epic 8: Notifications
FEATURE_PUSH_NOTIFICATIONS=true

# AI Features
FEATURE_AI_DAILY_PLANS=true
FEATURE_AI_COACHING=true
FEATURE_AI_CBT=true

# ============================================================================
# TESTING (For test environment only)
# ============================================================================

# Test user credentials (DO NOT use in production)
TEST_USER_EMAIL=test@lifeos.app
TEST_USER_PASSWORD=TestPassword123!

# Mock AI responses (for testing without API costs)
MOCK_AI_RESPONSES=false

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================

# Hot reload
HOT_RELOAD=true

# Flutter DevTools port
DEVTOOLS_PORT=9100

# ============================================================================
# PLATFORM-SPECIFIC CONFIGURATION
# ============================================================================

# iOS
IOS_BUNDLE_ID=com.lifeos.lifeosApp
IOS_TEAM_ID=your-apple-team-id

# Android
ANDROID_PACKAGE_NAME=com.lifeos.lifeos_app
ANDROID_SIGNING_KEY_ALIAS=lifeos-release

# Web (future)
WEB_URL=https://app.lifeos.app

# ============================================================================
# CORS & SECURITY
# ============================================================================

# Allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,https://app.lifeos.app

# JWT Secret (for custom auth, if not using Supabase Auth)
JWT_SECRET=your-jwt-secret-here

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Crash reporting
ENABLE_CRASH_REPORTING=true

# Analytics
ENABLE_ANALYTICS=true
ENABLE_ANONYMOUS_ANALYTICS=true

# ============================================================================
# NOTES
# ============================================================================
#
# SECURITY CHECKLIST:
# ✅ Never commit .env to git
# ✅ Use different keys for dev/staging/production
# ✅ Rotate API keys regularly
# ✅ Store SUPABASE_SERVICE_KEY securely (server-side only)
# ✅ Enable 2FA on all service accounts
# ✅ Use environment variables in CI/CD (GitHub Secrets)
#
# SETUP STEPS:
# 1. Copy this file: cp .env.example .env
# 2. Fill in all values marked with "your-*"
# 3. Run: flutter pub get
# 4. Run: flutter run
#
# TROUBLESHOOTING:
# - If Supabase connection fails, verify SUPABASE_URL and SUPABASE_ANON_KEY
# - If FCM doesn't work, check google-services.json / GoogleService-Info.plist
# - If AI fails, verify API keys and check rate limits
#
# ============================================================================
